(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{7220:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>g});var s=a(5155),i=a(2115),r=a(8226),n=a(5317),o=a(7869),l=a(6874),d=a.n(l),c=a(2502),m=a(4065);c.t1.register(c.Bs,c.PP,c.kc,c.E8,c.hE,c.m_,c.s$);let h=e=>{try{if(e&&"object"==typeof e&&"seconds"in e)return new Date(1e3*e.seconds).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0});if("string"==typeof e&&!isNaN(Date.parse(e)))return new Date(e).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0});return String(e)}catch(t){return String(e)}};function g(){let[e,t]=(0,i.useState)(!1),[a,l]=(0,i.useState)(""),[c,g]=(0,i.useState)([]),[b,u]=(0,i.useState)(""),[x,p]=(0,i.useState)(null),y=async()=>{try{let e=(0,n.rJ)(r.db,"registrations"),t=await (0,n.GG)(e);if(t.empty){console.log("No registrations found in database"),g([]);return}let a=t.docs.map(e=>({id:e.id,...e.data()}));console.log("Fetched registrations:",a),g(a)}catch(e){console.error("Error fetching registrations:",e),u("Failed to load registration data")}},v=async e=>{if(confirm("Are you sure you want to delete this registration?")){p(e);try{let t=(0,n.H9)(r.db,"registrations",e);await (0,n.kd)(t),g(t=>t.filter(t=>t.id!==e))}catch(e){console.error("Error deleting registration:",e),u("Failed to delete registration. Please try again.")}finally{p(null)}}};return(0,s.jsxs)("main",{className:"min-h-screen bg-white text-black",children:[(0,s.jsxs)(o.P.header,{className:"w-full px-6 py-4 flex justify-between items-center text-sm fixed top-0 bg-white z-10 shadow-sm",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,s.jsx)("div",{className:"font-semibold",children:"Strides Over Stigma"}),(0,s.jsxs)("nav",{className:"space-x-4",children:[(0,s.jsx)(d(),{href:"/",className:"hover:underline transition-colors duration-200",children:"Home"}),(0,s.jsx)("span",{className:"font-medium",children:"Admin Dashboard"})]})]}),(0,s.jsxs)("div",{className:"pt-20 pb-12 px-6 max-w-6xl mx-auto",children:[(0,s.jsx)(o.P.h1,{className:"text-3xl md:text-4xl font-bold mb-8 text-center",initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{duration:.8}}},children:"Admin Dashboard"}),e?(0,s.jsxs)(o.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Registration Data"}),(0,s.jsxs)("p",{className:"text-gray-600 mb-6",children:["Showing all ",c.length," registrations from participants"]})]}),c.length>0?(0,s.jsxs)(o.P.div,{className:"bg-white rounded-lg shadow-lg overflow-hidden",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,s.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3 p-6",children:c.map(e=>(0,s.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg shadow-sm border border-gray-100 hover:shadow-md transition-shadow duration-300 relative",children:[(0,s.jsx)(o.P.button,{onClick:()=>v(e.id),className:"absolute top-2 right-2 p-2 text-gray-500 hover:text-red-600 rounded-full hover:bg-red-50 transition-colors duration-200",whileHover:{scale:1.1},whileTap:{scale:.9},disabled:x===e.id,"aria-label":"Delete registration",title:"Delete registration",children:x===e.id?(0,s.jsxs)("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 cursor-pointer",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),(0,s.jsxs)("h3",{className:"font-semibold text-lg mb-4 pb-2 border-b border-gray-200",children:[e.firstName," ",e.lastName]}),(0,s.jsx)("div",{className:"space-y-2",children:["firstName","lastName","email","event","eventFee","shirtSize","status","paymentStatus","registeredAt","agreeToTerms"].filter(t=>t in e&&"id"!==t).map(t=>(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("span",{className:"text-sm font-medium text-gray-600 capitalize",children:[t.charAt(0).toUpperCase()+t.slice(1).replace(/([A-Z])/g," $1"),":"]}),(0,s.jsx)("span",{className:"text-sm text-right ml-2",children:"boolean"==typeof e[t]?e[t]?"Yes":"No":t.toLowerCase().includes("time")||t.toLowerCase().includes("date")||t.toLowerCase().includes("at")?h(e[t]):null!==e[t]&&void 0!==e[t]?String(e[t]):"-"})]},t))})]},e.id))}),(0,s.jsxs)(o.P.div,{className:"mt-8 p-6 bg-white border-t border-gray-200",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.2},children:[(0,s.jsx)("h3",{className:"text-xl font-semibold mb-6",children:"Registration Analytics"}),c.length>0?(0,s.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,s.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg shadow-sm",children:[(0,s.jsx)("h4",{className:"font-medium text-gray-800 mb-4",children:"Shirt Size Distribution"}),(0,s.jsx)("div",{className:"h-64",children:(0,s.jsx)(m.Fq,{data:(()=>{let e={};return c.forEach(t=>{t.shirtSize&&(e[t.shirtSize]=(e[t.shirtSize]||0)+1)}),{labels:Object.keys(e),datasets:[{label:"Shirt Sizes",data:Object.values(e),backgroundColor:["rgba(255, 99, 132, 0.6)","rgba(54, 162, 235, 0.6)","rgba(255, 206, 86, 0.6)","rgba(75, 192, 192, 0.6)","rgba(153, 102, 255, 0.6)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)"],borderWidth:1}]}})(),options:{maintainAspectRatio:!1,plugins:{legend:{position:"right"}}}})})]}),(0,s.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg shadow-sm",children:[(0,s.jsx)("h4",{className:"font-medium text-gray-800 mb-4",children:"Event Registration Counts"}),(0,s.jsx)("div",{className:"h-64",children:(0,s.jsx)(m.yP,{data:(()=>{let e={};return c.forEach(t=>{t.event&&(e[t.event]=(e[t.event]||0)+1)}),{labels:Object.keys(e),datasets:[{label:"Event Registration Count",data:Object.values(e),backgroundColor:"rgba(75, 192, 192, 0.6)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1}]}})(),options:{maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{precision:0}}}}})})]}),(0,s.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg shadow-sm",children:[(0,s.jsx)("h4",{className:"font-medium text-gray-800 mb-4",children:"Payment Status"}),(0,s.jsx)("div",{className:"h-64",children:(0,s.jsx)(m.Fq,{data:(()=>{let e={Paid:0,Pending:0,"Not Paid":0};return c.forEach(t=>{let a=t.paymentStatus||"Not Specified";"paid"===a?e.Paid++:"pending"===a?e.Pending++:e["Not Paid"]++}),{labels:Object.keys(e),datasets:[{label:"Payment Status",data:Object.values(e),backgroundColor:["rgba(75, 192, 192, 0.6)","rgba(255, 206, 86, 0.6)","rgba(255, 99, 132, 0.6)"],borderColor:["rgba(75, 192, 192, 1)","rgba(255, 206, 86, 1)","rgba(255, 99, 132, 1)"],borderWidth:1}]}})(),options:{maintainAspectRatio:!1,plugins:{legend:{position:"right"}}}})})]}),(0,s.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg shadow-sm",children:[(0,s.jsx)("h4",{className:"font-medium text-gray-800 mb-4",children:"Registration Timeline"}),(0,s.jsx)("div",{className:"h-64",children:(0,s.jsx)(m.yP,{data:(()=>{let e={};c.forEach(t=>{if(t.registeredAt){let a;if("object"==typeof t.registeredAt&&"seconds"in t.registeredAt)a=new Date(1e3*t.registeredAt.seconds).toLocaleDateString();else{if("string"!=typeof t.registeredAt)return;a=new Date(t.registeredAt).toLocaleDateString()}e[a]=(e[a]||0)+1}});let t=Object.keys(e).sort((e,t)=>new Date(e).getTime()-new Date(t).getTime());return{labels:t,datasets:[{label:"Registrations per Day",data:t.map(t=>e[t]),backgroundColor:"rgba(54, 162, 235, 0.6)",borderColor:"rgba(54, 162, 235, 1)",borderWidth:1}]}})(),options:{maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{precision:0}}}}})})]})]}):(0,s.jsx)("p",{className:"text-gray-500 text-center py-8",children:"No data available for analytics"})]}),(0,s.jsx)("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Total Registrations:"}),(0,s.jsx)("span",{className:"ml-2 font-semibold",children:c.length})]}),(0,s.jsxs)(o.P.button,{onClick:()=>y(),className:"text-sm text-blue-600 hover:text-blue-800 flex items-center cursor-pointer",whileHover:{scale:1.05},whileTap:{scale:.98},children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]})]})})]}):(0,s.jsx)("div",{className:"text-center py-12 bg-white rounded-lg shadow-lg",children:(0,s.jsx)("p",{className:"text-gray-500",children:"No registrations found"})}),(0,s.jsx)("div",{className:"mt-8 flex justify-end",children:(0,s.jsx)(o.P.button,{onClick:()=>t(!1),className:"px-4 py-2 border border-black text-black rounded-md hover:bg-black hover:text-white transition-colors duration-300 cursor-pointer",whileHover:{scale:1.02},whileTap:{scale:.98},children:"Logout"})})]}):(0,s.jsxs)(o.P.div,{className:"max-w-md mx-auto bg-white p-8 rounded-lg shadow-lg",initial:"hidden",animate:"visible",variants:{hidden:{y:25,opacity:0},visible:{y:0,opacity:1,transition:{duration:.8}}},children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-6",children:"Administrator Login"}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Admin Password"}),(0,s.jsx)("input",{type:"password",id:"password",value:a,onChange:e=>l(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-black",placeholder:"Enter password"})]}),b&&(0,s.jsx)("p",{className:"text-red-500 mb-4 text-sm",children:b}),(0,s.jsx)(o.P.button,{onClick:()=>{(0,r.uF)(a)?(t(!0),y(),u("")):u("Incorrect password")},className:"w-full bg-black text-white py-2 px-4 rounded-md hover:bg-gray-800 transition-colors duration-300 cursor-pointer",whileHover:{scale:1.02},whileTap:{scale:.98},children:"Login"})]})]}),(0,s.jsx)(o.P.footer,{className:"text-xs px-6 py-8 text-gray-500 border-t mt-auto",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.3},children:(0,s.jsxs)("div",{children:["\xa9 ",new Date().getFullYear()," Strides Over Stigma - Admin Portal"]})})]})}},7992:(e,t,a)=>{Promise.resolve().then(a.bind(a,7220))},8226:(e,t,a)=>{"use strict";a.d(t,{db:()=>l,uF:()=>d});var s=a(3915),i=a(6864),r=a(5317),n=a(6203);let o=(0,s.Wp)({apiKey:"AIzaSyDuOKW4ucn_IB2sI5AIb5BsWPC_9yfdxCk",authDomain:"stridesoverstigma.firebaseapp.com",projectId:"stridesoverstigma",storageBucket:"stridesoverstigma.firebasestorage.app",messagingSenderId:"834837867708",appId:"1:834837867708:web:b47b7dbe03932f8b6cf4b9",measurementId:"G-Y38XY9X3L5"});(0,i.P5)(o);let l=(0,r.aU)(o);(0,n.xI)(o);let d=e=>"d"===e}},e=>{var t=t=>e(e.s=t);e.O(0,[992,146,647,192,930,441,684,358],()=>t(7992)),_N_E=e.O()}]);